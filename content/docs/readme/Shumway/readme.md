# Shumway
<!-- Insert your shields here -->

<!-- TOC -->
## Содержание 
- [Общее описание](#Общее-описание)
- [Принцип работы сервиса](#Принцип-работы-сервиса)
- [Связанные сервисы](#Связанные-сервисы)

## Общее описание
**Shumway (Accounting Management Service)** - сервис, отвечающий за отслеживание балансов участников платформы. 

## Принцип работы сервиса

При инициализации изменения баланса счета, например, сервисами **Payouter** или **Hellgate** формируется *batch* (batch - набор проводок). Далее из набора batch'ей формируется план проводок, который передается в **Shumway**. **Shumway** производит следующие операции:
1. холдирует необходимое количество платежных средств на счете плательщика;
2. предоставляет вызывающему сервису баланс счета после произведения холда;
3. - если баланс плательщика не опустился ниже нуля, то вызывающий сервис совершает коммит (подтверждение платежа);
   - если баланс плательщика опустился ниже нуля, то вызывающий сервис совершает роллбэк (отмена платежа).   

## Связанные сервисы

- `Hellgate`
- `Payouter`

## Составители
