### Регистрация в личном кабинете
Перед началом работы с платформой вам будет необходимо пройти регистрацию в [личном кабинете мерчанта](https://dashboard.rbk.money/). 

### Магазины
Магазин - это способ обобщения категорий товаров и услуг, которые вы продаете вашим клиентам. К конкреным магазинам привязаны ваши счета платформы, на которых аккумулируются средства клиентов, в последствии перечисляемые вам с помощью банковских переводов.

Магазины могут быть тестовыми и активными. Тестовый магазин – магазин с тестовой категорией товаров или услуг, по которому разрешено создание транзакций только со [специальных номеров карт](/integrations/testcards/), а также запрещены процессы вывода средств с помощью банковских переводов.

!!! note "Информация"
    Тестовые магазины используют ту же производственную среду, что и активные, поэтому их можно использовать для мониторинга доступности платформы.

Если вы уже зарегистрировались в личном кабинете, платформа создала вам первый тестовый магазин с ID=1 автоматически.

### Инвойсы

Платформа использует инвойс, как базовую сущность для списания средств с платежных инструментов плательщика. Перед попытками отрисовать платежные формы для плательщика, либо списать средства с его платежного инструмента на вашем бекэнде необходимо созадть в платформе инвойс и получить его идентификатор

### Получение API-ключей
Для того, чтобы платформа могла авторизовать вызываемые ваши методы API, необходимо использовать несколько типов ключей:

- **Ключ токенизации (Tokenizer Key)** - публикуемый в открытом доступе ключ, который позволяет платежным формам авторизоваться на бэкенде RBKmoney и получить платежный токен, в дальнейшем используемый для списания средств с платежного инструмента плательщика. Вы можете публиковать этот ключ без ограничений.
- **API-ключ (API Key)** - ваш приватный ключ, используемый для авторизации вашего бекэнда. Этот ключ используется для наиболее критичных действий, таких, как инициация списания средств с платежного инструмента плательщика. Этот ключ должен быть доступен и известен только вам.
- **Ключ для обратных нотификаций (Callback Key)** - публичный ключ платформы, используемый для проверки callback-нотификаций, которые платформа отправляет на ваш бекэнд. Примеры таких нотификаций - уведомление о необходимости переадресовать плательщика на шлюз дополнительной авторизации платежа 3D-secure, либо уведомление вашей серверной стороны об изменении статуса платежа в платформе

### Прием платежей

В общем случае платформа работает по следующему принципу:

- С помощью API-вызова вы создаете в платформе инвойс, который используется для дальнейшего списания средств
- Инициация отрисовки платежных форм в UA плательщика
    - Вы открываете iFrame  с нашей платежной формой и передаете в него параметры
    - Вы верстаете платежную форму самостоятельно и вызываете ее с ваших серверов
- После ввода данных платежных карт в платежные формы наша библиотека tokenizer.js отправляет полученные данные на наш бекэнд, в ответ получает токен платежного средства. Платежная форма передает полученный токен на ваш бекэнд
- С вашей серверной стороны вы инициируете API-вызов на создание платежной транзакции и ожидаете callback-уведомлений

# Диаграмма последовательности взаимодействия с платформой

В качестве примера проведения успешной оплаты с использованием синхронного callback можно рассмотреть следующую диаграмму:

!!! note "Информация"
    Синхронный callback подразумевает то, что вы указали его URL в настройках выбранного магазина. В таком случае, платформа пришлет соответствующий ответ на event polling инвойса только после того, как ваш серверный код ответил успешным HTTP статусом на вызов вашего callback URL.

  ![/wsd/custom_form_w_cb.png](/wsd/custom_form_w_cb.png)

# Сценарии интеграции

- Если вы хотите интегрировать готовую платежную форму checkout.rbk.money, прочтите [инструкцию](/integrations/checkout/)
- Если вы хотите интегрировать кастомную платежную форму, прочтите [инструкцию](/integrations/tokenizer/)
